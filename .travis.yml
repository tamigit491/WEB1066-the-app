language: java
jdk:
- openjdk8
services:
- docker
env:
  matrix:
  - COVERAGE=0.057 BUILD_TARGET=./monolithic/ui
  global:
  - DOCKER_LOGIN=tamigit491
  - secure: RU50vOTFk8UA2XB/0yvXr/mnhYRwNoDNxGfL/1NLf4xa2PjFgjjGwq/m9sKtnFRcjk8CwTPZri6n+Gjb1wUWhIyTUQ/lw55PyZr549xzpxwBAs91hTp4Zr4D8HxUncWkYLgNNkYJAAv5xCzsh6GXdc/VNU9L7RrRF03VtJtIxYpwjOYCnx/COdrs/BH/BvthDiNMs/MbJBmMkLQ7YS0ChdBMR5fBql9FFGCVAtBGWWnM6yX8mKmLfipQC5F2sk8hJqAJjerdnZnjwuV3I+xVmKWqzvX++L7Tsu3X/YnM0L+KlvC2iqeIOaNHlqtszUWVr14Kc6oWOfN4LNpSX+6K5BwVERf0Ns/Kt2twGzbTs8B90YRIp1yV56OrMCAqXtFaHQcBSGTwlehnLnidYpHAqMGFpePXUIAIbr2RKfnK8R2MO+3MWmDfCA0szdKlwJEE2xlDPDYWxpovXIoHi1Cn805Z3rpgjC3hfyb6V/r5OK4Fxpctm7MMkvMY7OTEVIYLJzINDhcBXK77xDyyCJigLbx09rhRTQGjeikalB99B7cts60RqwhwYalLRg964VhA0qksMZtBZ9pWuuzs1Ant1naDhEtGaaCwZR6Zh132HDFO1IHb+HhhHazWKp24KMONkicV9V0utA1GjC7dgsKtZzZ/+iM/Qtj7Wjdkx/c7RHk=
install:
- ./gradlew clean jar
script:
- ./gradlew -p $BUILD_TARGET check
after_success:
- find . -name jacocoTestReport.csv|xargs cat|awk -F',' '{print $3" "$4" "$5}'
deploy:
  provider: script
  script: bash -c "echo \"${DOCKER_PASSWORD}\" | docker login --username \"${DOCKER_LOGIN}\" --password-stdin ;"
  on:
    all_branches: true
