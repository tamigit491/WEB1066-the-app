language: java
jdk:
- openjdk8
services:
- docker
env:
  matrix:
  - COVERAGE=0.057 BUILD_TARGET=./monolithic/ui
  global:
  - DOCKER_LOGIN=tamigit491
  - secure: TIZ92iyxWQUKTHYReZWGZoHeUL9ixEkZbW/0j6zr1Qv+WHsX+iuI5W2+1r+zRqdef9+ede17vtxL4DqwzKsg+Z66UH99A1H/h8gJ2HA4pDkKDB5pnrSnvOAJG3b5ZZqY5kYTx32MJGs2W/NxbTpfPccUhGs7SrLUqod8zUj+CVCC2w96zUThqCCWVhmLUG+X2bH27IyQftAOzdpPi+PECne8OjpirKGCtV30zVjD2D/kmkW1Sz2Sff/T9/6P5jU47ujm40kl2z3kmy/pvQV8kGP2MQxiGMJT3K0Ng7bn30ElImOinjV4/AGJVo2zmqWPWrv8USQWyhSAjkiwrc+ITvyoCGya/SDqUo2IoTbV5tSJvNVuDF5z0kdoifBhPNoKnLbjUlcXHGaMxaffqnuNzpSFs1Qqby/f7iBax49ctg7nCFCjMo/5UE0ndk6KS4hWb2xVXgtY3oGtk+g5waNAsScg88Oa07BlJdARmlYYDhCg/uneQM7OS5+X2mWJ3e1k7mo0i+5cq5tKQBv1TlMPOGWxznImMYPxWusrvL4CI68a8ZJXUwQ+5MAimLNCU707+HeQUUfIODTSbsHapa4ut8wl76vC4GbQZ4P8P+9JJyavVCEIN/CPjR70k9nFask16/YThvfNdNgMQNVaLjMjb1SHLVrl6ndTIQU5OdLOl6w=
install:
- "./gradlew clean jar"
script:
- "./gradlew -p $BUILD_TARGET check"
after_success:
- find . -name jacocoTestReport.csv|xargs cat|awk -F',' '{print $3" "$4" "$5}'
deploy:
  provider: script
  script: bash -c "echo \"${DOCKER_PASSWORD}\" | docker login --username \"${DOCKER_LOGIN}\"
    --password-stdin ;"
  on:
    all_branches: true
