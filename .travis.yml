language: java
jdk:
- openjdk8
services:
- docker
env:
  matrix:
  - COVERAGE=0.057 BUILD_TARGET=./monolithic/ui
  global:
  - DOCKER_LOGIN=tamigit491
  - secure: kml6qpncv7hX+Uiz1lfzMKu4wLa5gaUjJc05cAHyUGaB++HUGDFEz2/Y+zPyQC4iasjhUh0Vw4gsETdwU4ZEfCw8rpFQfWxBOMJFOw2awWnKnKnWObzf8YlLTkRbpUp6PysVjBORMivnLLq7NXyX4kON0d+4586hjbGBkm7W2eWPDsURpquBB+zxp0ZutAiZZDN+Fjhev75ugxF8B9XcjcQM4S04l5zbBzIw2jGnxu+hKg7a72Vk8Sv5+e28yKS20ngQhwoTkU3JfqRfllRx8RbRqDgtxwhmYnXCqMDRbgJCjcJuAGJual+svsqoW6Vd0HIpo3TUvDfOGvVP+V3XLccHJh2GP5i0WKC+JOBYHpivPO8/cFMqFyCu2yWEiYEyb/+QqhY+C9PQH1fvg5isQyn2Rs3ZqfzqlDBVZoKIdtITElnUDAvR+QszDEkVKtSuibeTChubUTPV1aX8YYFhGHDtRVuakLjEv+7UTCn3/NIq+9F5VFh8LA8XD3NOcvu7Sppa/VNCNt98RM5xvBreYdLcYOj8nCUDrn587kgCMQ8GS0yV5+fO8R5KIwj0jjgqdDBVmxjpvlQApxSbXQl4YC1spIDyvW8JiZGu/vdPxS8aLXIDPQF2wDBGa5bB0AELPgPVMffTm5yIoaeX07ENGVmyIpgfY2/ddM81TjuP5UQ=
install:
- ./gradlew clean jar
script:
- ./gradlew -p $BUILD_TARGET check
after_success:
- find . -name jacocoTestReport.csv|xargs cat|awk -F',' '{print $3" "$4" "$5}'
deploy:
  provider: script
  script: bash -c "echo \"${DOCKER_PASSWORD}\" | docker login --username \"${DOCKER_LOGIN}\" --password-stdin ;"
  on:
    all_branches: true
