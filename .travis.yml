language: java
jdk:
- openjdk8
services:
- docker
env:
  matrix:
  - COVERAGE=0.057 BUILD_TARGET=./monolithic/ui
  global:
  - DOCKER_LOGIN=tamigit491
  - secure: EZ7SoRDfZclEY3nNEgVyUnP/wF7smHaJz9kAGBYL1zcnDZHKZQA1eaJbzG8TGiOKrqVw5R+iHrrc4DSTohMTswwakgPHOaBGk9MwruE+MYWV283/gn1qanRU125mLooeoR10SOr73hNWjJtTSNBNuL4JTbcj3Elap+wj/Hn2O+R/VQTTDy30PZ7yt/rPOdGEGieWu3EVcrK/UuCQFoXYDZEun7UmJAEGWYG8PtH+Q7IJJxgSo51cbN5ZU7M5bBVP8HCaG05tQIaFsMmO/oCnRBpsai4vt2QpaoKPsOIBILxepo9VSM3KLUyKaIl9l6AMxF5zL0OtzDGYi3U0+Fe3QA/GYDqqPSRg7ZZ9fCMvq/irfGWD1axXr9zvF4zy5PhFyeAqJ65Afy6ZGgh9mhf8/DF5MHUbGzY0En184rQTuZSwGrXafyPxLRpguDdgp5CZEj78kG45utQTcbyUvt/4zoGfy1Eyo/IDTSdHYDrzI6FxStDjHMQz6cJZ12Btq9JplrjmoIOQTGNFMtMBZKVVCRQDE/6vOTVkosaJJ9mmn4E5pJUyOggHgLaVlW8RGF7qa9cL/JEWjjKn/SHgwQKz5PdlAsAF8U54Bbm4oLI12KBOJWJ5lHDLN7z46LmvJCi/qtlq2eCzx7CyTSCAeif7ikGn9X54d/x5o/VCp/hwyTM=
install:
- "./gradlew clean jar"
script:
- "./gradlew -p $BUILD_TARGET check"
after_success:
- find . -name jacocoTestReport.csv|xargs cat|awk -F',' '{print $3" "$4" "$5}'
deploy:
  provider: script
  script: bash -c "echo \"${DOCKER_PASSWORD}\" | docker login --username \"${DOCKER_LOGIN}\"
    --password-stdin ;"
  on:
    all_branches: true
