language: java
jdk:
- openjdk8
services:
- docker
env:
  matrix:
  - COVERAGE=0.057 BUILD_TARGET=./monolithic/ui
  global:
  - DOCKER_LOGIN=tamigit491
  - secure: l5VwS4LMHVlzNHQrGLdc1InPb5zmekZ2UUKofduLNJBHnaZgF9Sj4TYh+2htP05lgIhlmcEyJAGxn8RfAoz82oRB/LlT4+XnNzn8oRYMBj8aBg23ENzMVSTGghJiXwqB2dGR0H3pB2duy20Nu+W4Ucw1BeaNvyeBDGS8gdC7H7hW3+kwOnMeWY/w2gpwOUhJgap+5EaMCdcYAGh757ODSzGz0LNmd0eKM+5PfjhFrglCE4WJtN8GlnLxB5kYhWlUvC6SLug0vdghSSEe9JTVF7Af2w03EzY99gprPq3vmv2XnZvbcxCQL5neB0SsyYhIxuU36Ap4IGJc58BSben7nXPkKowUmZn+hzf2ospgJqbzRV6uqPHpw3P3AnQFMyp121YfCwYmpdyLvNeAXVCnjr1UPKzreZrsXhFnwGdAgui/pMIguNS02dnnLSA6Hr8jNbHd4xLbukUKILxwM/yQB3gTzQ37IyYyzOf3cj5r09DkY5Eg+evtjoF+S+CKXBy7MyqgaAKX2UXc+frtlxkTRreDOTOOsJ9pOBLtakNM2oxQ3peGulPW1q/ZjUHZRQ5RGLOfvgpDuxGzcR6m+ymorSfo+SiLcwEhRc5AcG+6oZjZvGHv4e5iSb2J66JYNdCc8nn2SRx6zvnUSlo7rxzHzxPfNZiRqRth5sqM6BBCiJ4=
install:
- ./gradlew clean jar
script:
- ./gradlew -p $BUILD_TARGET check
after_success:
- find . -name jacocoTestReport.csv|xargs cat|awk -F',' '{print $3" "$4" "$5}'
deploy:
  provider: script
  script: bash -c "echo \"${DOCKER_PASSWORD}\" | docker login --username \"${DOCKER_LOGIN}\" --password-stdin ;"
  on:
    all_branches: true
