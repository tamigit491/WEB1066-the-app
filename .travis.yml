language: java
jdk:
- openjdk8
services:
- docker
env:
  matrix:
  - COVERAGE=0.057 BUILD_TARGET=./monolithic/ui
  global:
  - DOCKER_LOGIN=tamigit491
  - secure: Irk2QcJOmyux2CgnKLst0CGuYoKqLNh3qH1vzJrA6BusuzVb0PB7yjWKRQLn1B9kQU8S7ZfbA5EgstMCatK0Q6ESppSt4Rs0P51PjATI8TFK1Kp1A+wOUiDnuxAn7T87WiG0NQJQLIiTgRTMVCBumroDOxlw8e7v45aTbp3OMmfmRGj06JNTw0ZV7q+HZsyEgXuouhctbA+DMcyokAYdzDR2lpBmBqBr4TWS9tvQbFkEFbQc6L440iufLl7uVnn81/Y7FOv8XveGKcHroiYoB74sye3QIv/w3rs/cPnZK+IauJPNSc3SkVtrJMLjsnRj58L1XUO9NOKD55WY83BFevWfTpNVEfjeoabVIjyP4Fum8qOnjnst+YbSyLo3n4Uk3R/9ikRaU2SnhlBOhQLz361KClwFEHrzTb1zhnHhN9lIPEjfxelvsieps0cJTsUK22fphNVwiwif2RtS4XtgtSedBOAh4XTbXPtOo8FKZexKNp2Pw4JM9o9nKt3pNo1WliXUbcrThR5STqWiHV8uMKKDhJq56CWUrHFDUuPEpAmE9J83zyk3QtnWsheCmfSKmFT0SPkYjFW0KoiYu/NtGVJqfHdPznt/ge9nPF9boBU8nodbYIzHjG/l8mel0oqB67IU1Y0SJY74kXBUzes7dqAD/+ol4bGWd4/P6ab2MWg=
install:
- "./gradlew clean jar"
script:
- "./gradlew -p $BUILD_TARGET check"
after_success:
- find . -name jacocoTestReport.csv|xargs cat|awk -F',' '{print $3" "$4" "$5}'
deploy:
  provider: script
  script: bash -c "echo \"${DOCKER_PASSWORD}\" | docker login --username \"${DOCKER_LOGIN}\"
    --password-stdin ;"
  on:
    all_branches: true
