language: java
jdk:
- openjdk8
services:
- docker
env:
  matrix:
  - COVERAGE=0.057 BUILD_TARGET=./monolithic/ui
  global:
  - DOCKER_LOGIN=tamigit491
  - secure: VH4FC1LbgY2aBT+YwPIrC4CVKIz8+LBYthUSzMPEwMbdsFBL559UqLY5AJfUHO4Utu1lE4WzvcLOqmv8E+A0+B/pNEHeCKIBl/aL1pPRvTw4iHo79TqhTsFNtJ+b79j6mzbmCHJq6016o/sB/C+U8DOpYxi+8TjHQztCKqHPT5jzLnCtpvXC0GSbfuWpR71Gmyh49FjW3GoBBGoN1RqBwx7Uzrs/pc7OtLPZ7qNoaobBjJTvJYMFtN/fa5zvOobZOusRPTUnhXTOM9jlCkbmUEAyaGyjq4NoProxZO49CMLM7i9bUVUY2XyZkc96tFt5p722QKSihFXDI29mhTl7t8R1+t4KpJFGIDDizN2Gz4Aq/V0oXBgQJDVy4MO5N80SJ4Yfl1F8W3hnKmQ/TzhaLkIyXuBMIJtFH2H3ZgeEXIdVn8nSietxWzEiNGkCUvNNRFtTbcr+oqdCEgMKrmzfHCsGvkzvssc8e/tHHwYTFeumzBUrDxzlpS9ffmtZm6LRUciNe9ifVKsKUgTURe8dAZSesRFBBp8XwVZKSrHXQBMKS3X/fc2eKQGcS27m04DuPPrGC+hCm9vMvyPjXpxQ6jFTunRMeg+mgcq5tzmEKq/gCmmTXrA5JitTvi5tIL5N9eazcyONo7pybM+NMzT6ftGCEJjMg5j6KOC1B/1NOlw=
install:
- ./gradlew clean jar
script:
- ./gradlew -p $BUILD_TARGET check
after_success:
- find . -name jacocoTestReport.csv|xargs cat|awk -F',' '{print $3" "$4" "$5}'
deploy:
  provider: script
  script: bash -c "echo \"${DOCKER_PASSWORD}\" | docker login --username \"${DOCKER_LOGIN}\" --password-stdin ;"
  on:
    all_branches: true
