language: java
jdk:
- openjdk8
services:
- docker
env:
  matrix:
  - COVERAGE=0.057 BUILD_TARGET=./monolithic/ui
  global:
  - DOCKER_LOGIN=tamigit491
  - secure: ofLakmYh/ndawMV795Jef6IUBRP3Y9qNxEMFMVk7TDbDYV4HJJl62nCYigEXFUiBbhYQikVuzm+Jc2tO5pwbJgAbINWM4sCVceXBqdFNP5f7Jppwyhho7wNSzRuFtmHvwbEaxcSZNz93VgaHp6o+7Vv7h39GYzEqE13+EgqcUZjK0js0At3oTFArNx4YoLSQKLj+W49u1pc1ofHN2pSVSdE9k/OKHuERVK+bdeVGe77U1S381sV7b7+f6zCAbd5Cnt0iHoBzyVc+9O4cDo1RgO3tRlHWclTQzBQJRo9vM1/Jx3DvBlr1MZ2Cr/kChZlJcHXyFecHDho/2PQycqrOCr1ILkVghDHIpkR2fVQgNZr1q5w1ftHwhsRlaQik2+ownudRQC67UZANqoAq6Yb/CORMK0ewOYR3Caa+R4Hy/bjqTyEhXHocjUoip9cqIkbrULLKZesMTva3HE/a0M9ohw2a1kgTGPPG6Wm2KeRo0j6kkCu12Nn0xRJZtAU9527sGUAvstEem3D9B8Zxyk0Y1VqLxl5x5Yqsqc8viuWWCGn6yHdVw2yUQPuTVHVGM6L1UeaTF25Lq1DmyJPW9frmjeTNfUWAKPN1I7erE4akSXPJIWfJRVzMvjfbXbIkK+v948OAGTU4MjB+hQ1Fn4jqbW+pMwH80ZUlk3T38FHrH7U=
install:
- ./gradlew clean jar
script:
- ./gradlew -p $BUILD_TARGET check
after_success:
- find . -name jacocoTestReport.csv|xargs cat|awk -F',' '{print $3" "$4" "$5}'
deploy:
  provider: script
  script: bash -c "echo \"${DOCKER_PASSWORD}\" | docker login --username \"${DOCKER_LOGIN}\" --password-stdin ;"
  on:
    all_branches: true
